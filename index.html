<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>N√°hodn√Ω vyberaƒç</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            /* Inspired by the dark background in the design */
            background-color: #111111;
            background-image: radial-gradient(circle at top right, rgba(121, 69, 255, 0.15), transparent 40%),
                              radial-gradient(circle at bottom left, rgba(69, 128, 255, 0.15), transparent 50%);
        }

        /* --- MODERN SLOT MACHINE STYLES --- */
        #slot-machine {
            height: 240px; /* Defines the viewing window height */
            width: 100%;
            margin: 1.5rem auto;
            border-radius: 0.75rem; /* rounded-xl */
            overflow: hidden;
            position: relative;
            background-color: rgba(255, 255, 255, 0.03);
            box-shadow: inset 0 2px 8px rgba(0,0,0,0.2);
        }

        #reel {
            /* Spin animation: duration and a modern easing function */
            transition: transform 4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .reel-item {
            height: 60px; /* Each item must have a fixed height */
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem; /* 24px */
            font-weight: 500; /* medium */
            color: #d1d5db; /* text-gray-300 */
        }

        /* The pointer/selector line in the middle */
        #slot-machine::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 0.5rem;
            right: 0.5rem;
            transform: translateY(-50%);
            height: 60px; /* Match reel-item height */
            background: rgba(139, 92, 246, 0.1); /* deep-purple-500 with opacity */
            border-radius: 0.5rem; /* rounded-lg */
            border-top: 2px solid #8B5CF6; /* deep-purple-500 */
            border-bottom: 2px solid #8B5CF6; /* deep-purple-500 */
            box-sizing: border-box;
        }

        /* Gradient mask for fading items */
        #slot-machine {
            -webkit-mask-image: linear-gradient(to bottom, transparent 0%, black 30%, black 70%, transparent 100%);
            mask-image: linear-gradient(to bottom, transparent 0%, black 30%, black 70%, transparent 100%);
        }
        
        /* Custom border/background inspired by the design */
        .card-style {
            background-color: rgba(28, 28, 30, 0.6); /* Semi-transparent dark background */
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }

    </style>
</head>
<body class="text-white flex items-center justify-center min-h-screen font-sans p-4">

    <div class="container mx-auto max-w-md w-full">

        <div id="main-menu-view">
            <header class="text-center mb-10">
                <h1 class="text-4xl sm:text-5xl font-extrabold text-gray-100 tracking-tight">ü§∑‚Äç‚ôÇÔ∏è</h1>
                <p class="mt-3 text-lg text-gray-400">N√°hodn√Ω rozhodovaƒç,ƒçi ƒço.</p>
            </header>
            <div class="space-y-4">
                <button data-view="genre-view" class="menu-button w-full p-5 text-left card-style rounded-xl hover:border-violet-400 transition-all duration-300 flex items-center space-x-4">
                    <span class="text-4xl p-3 bg-white/10 rounded-lg" role="img" aria-label="Film">üé¨</span>
                    <div>
                        <h2 class="text-lg font-semibold text-gray-100">Filmov√Ω ≈æ√°ner</h2>
                        <p class="text-sm text-gray-400">N√°hodn√Ω v√Ωber ≈æ√°nru</p>
                    </div>
                </button>
                 <button data-view="yes-no-view" class="menu-button w-full p-5 text-left card-style rounded-xl hover:border-violet-400 transition-all duration-300 flex items-center space-x-4">
                    <span class="text-4xl p-3 bg-white/10 rounded-lg" role="img" aria-label="√Åno/Nie">üëçüëé</span>
                    <div>
                        <h2 class="text-lg font-semibold text-gray-100">√Åno / Nie</h2>
                        <p class="text-sm text-gray-400">R√Ωchle rozhodnutie</p>
                    </div>
                </button>
                <button data-view="streaming-view" class="menu-button w-full p-5 text-left card-style rounded-xl hover:border-violet-400 transition-all duration-300 flex items-center space-x-4">
                    <span class="text-4xl p-3 bg-white/10 rounded-lg" role="img" aria-label="TV">üì∫</span>
                    <div>
                        <h2 class="text-lg font-semibold text-gray-100">Stream slu≈æba</h2>
                        <p class="text-sm text-gray-400">Kde dnes pozera≈•?</p>
                    </div>
                </button>
            </div>
        </div>

        <div id="selection-view" class="hidden relative card-style p-6 sm:p-8 rounded-2xl">
            <div class="absolute top-4 left-4 z-10">
                 <button id="back-button" class="flex items-center gap-1.5 px-3 py-1.5 bg-white/10 text-gray-300 font-semibold rounded-lg hover:bg-white/20 transition-colors focus:outline-none focus:ring-2 focus:ring-violet-500">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                      <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" />
                    </svg>
                    Nasp√§≈•
                </button>
            </div>

            <div class="text-center">
                <h2 id="selection-title" class="text-2xl md:text-3xl font-bold text-gray-100 mb-2"></h2>

                <div id="slot-machine-container">
                    <div id="slot-machine">
                        <div id="reel"></div>
                    </div>
                </div>

                <div class="h-16 flex items-center justify-center"> <p id="result-text" class="text-3xl font-bold text-violet-400 transition-all"></p>
                </div>

                <button id="startButton" class="w-full sm:w-auto mt-2 px-10 py-4 bg-violet-600 text-white font-bold text-lg rounded-lg hover:bg-violet-700 focus:outline-none focus:ring-4 focus:ring-violet-400/50 disabled:bg-gray-600 disabled:text-gray-400 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-105">
                    Spusti≈•
                </button>
            </div>
        </div>
    </div>

<script>
    // --- SOURCE DATA ---
    const dataSources = {
        'genre-view': {
            title: 'N√°hodn√Ω v√Ωber filmov√©ho ≈æ√°nru',
            resultPrefix: 'Dnes si pozrie≈°:',
            values: ["Akƒçn√Ω üí•", "Kom√©dia üòÇ", "Dr√°ma üé≠", "Horor üëª", "Sci-Fi üëΩ", "Triler üî™", "Romantick√Ω ‚ù§Ô∏è", "Dokument√°rny üåç", "Animovan√Ω üß∏", "Fantasy üßô"]
        },
        'yes-no-view': {
            title: 'Rozhodovaƒç √Åno / Nie',
            resultPrefix: 'Odpoveƒè je:',
            values: ['√Åno üëç', 'Nie üëé', 'Urƒçite! ‚úÖ', 'Ani n√°hodou ‚ùå']
        },
        'streaming-view': {
            title: 'Ktor√∫ streamingov√∫ slu≈æbu?',
            resultPrefix: 'Zpni si:',
            values: ['Netflix', 'HBO Max', 'Disney+', 'SkyShowtime', ]
        }
    };

    // --- PAGE ELEMENTS ---
    const mainMenuView = document.getElementById('main-menu-view');
    const selectionView = document.getElementById('selection-view');
    const menuButtons = document.querySelectorAll('.menu-button');
    const backButton = document.getElementById('back-button');
    const selectionTitle = document.getElementById('selection-title');
    const reel = document.getElementById('reel');
    const startButton = document.getElementById('startButton');
    const resultText = document.getElementById('result-text');

    const SPIN_DURATION_MS = 4000; // Must match the CSS transition duration in ms
    let currentSelectionRunner = null;

    // --- VIEW SWITCHING ---
    function showView(viewId) {
        // Add a fade effect for smoother transitions
        document.body.style.transition = 'opacity 0.3s ease-in-out';
        document.body.style.opacity = '0';

        setTimeout(() => {
            if (viewId === 'main-menu-view') {
                mainMenuView.classList.remove('hidden');
                selectionView.classList.add('hidden');
                if (currentSelectionRunner) {
                    currentSelectionRunner.cleanup();
                    currentSelectionRunner = null;
                }
            } else {
                mainMenuView.classList.add('hidden');
                selectionView.classList.remove('hidden');
                setupSelection(viewId);
            }
             document.body.style.opacity = '1';
        }, 300);
    }

    // --- SETUP SELECTION ---
    function setupSelection(viewId) {
        if (currentSelectionRunner) {
            currentSelectionRunner.cleanup();
        }
        const source = dataSources[viewId];
        currentSelectionRunner = createSelectionRunner(source.values, source.resultPrefix);
        selectionTitle.textContent = source.title;
        currentSelectionRunner.populateReel();
        startButton.onclick = () => currentSelectionRunner.run();
        resultText.textContent = ''; // Clear previous result
        startButton.disabled = false; // Ensure button is enabled
    }

    // --- SLOT MACHINE LOGIC ---
    function createSelectionRunner(values, prefix) {
        const itemHeight = 60; // Must match .reel-item height in CSS
        const windowHeight = 240; // Must match #slot-machine height in CSS
        const originalValues = [...values];

        const populateReel = () => {
            reel.innerHTML = '';
            reel.style.transition = 'none';
            reel.style.transform = 'translateY(0)';

            // Create multiple sets of items for a seamless "infinite" spin
            const clones = 5;
            const reelItems = Array.from({ length: clones }).flatMap(() => originalValues);

            reelItems.forEach(value => {
                const item = document.createElement('div');
                item.classList.add('reel-item');
                item.textContent = value;
                reel.appendChild(item);
            });
        };

        const cleanup = () => {
            reel.innerHTML = '';
        };

        const run = () => {
            startButton.disabled = true;
            resultText.textContent = '';
            reel.style.transition = `transform ${SPIN_DURATION_MS / 1000}s cubic-bezier(0.34, 1.56, 0.64, 1)`;

            const randomIndex = Math.floor(Math.random() * originalValues.length);
            const selectedValue = originalValues[randomIndex];
            
            const targetIndex = randomIndex + (originalValues.length * 2);

            const targetPosition = - (targetIndex * itemHeight) + (windowHeight / 2) - (itemHeight / 2);

            reel.style.transform = `translateY(${targetPosition}px)`;

            setTimeout(() => {
                resultText.textContent = `${prefix} ${selectedValue}`;
                startButton.disabled = false;

                setTimeout(() => {
                    reel.style.transition = 'none';
                    const resetIndex = randomIndex + originalValues.length;
                    const resetPosition = - (resetIndex * itemHeight) + (windowHeight / 2) - (itemHeight / 2);
                    reel.style.transform = `translateY(${resetPosition}px)`;
                }, 100);

            }, SPIN_DURATION_MS);
        };

        return { run, cleanup, populateReel };
    }

    // --- INITIALIZE EVENT LISTENERS ---
    menuButtons.forEach(button => {
        button.addEventListener('click', (e) => {
            // Prevent default button action and use the view switcher
            e.preventDefault();
            showView(button.dataset.view);
        });
    });

    backButton.addEventListener('click', (e) => {
        e.preventDefault();
        showView('main-menu-view');
    });

</script>

</body>
</html>
