<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>N√°hodn√Ω vyberaƒç</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            background-color: #111111;
            background-image: radial-gradient(circle at top right, rgba(121, 69, 255, 0.15), transparent 40%),
                              radial-gradient(circle at bottom left, rgba(69, 128, 255, 0.15), transparent 50%);
        }

        /* --- MODERN 3D DICE STYLES --- */
        #dice-scene {
            width: 220px;
            height: 220px;
            perspective: 1200px;
            margin: 1.5rem auto;
            cursor: pointer; /* Add pointer cursor to indicate it's clickable */
        }

        #cube {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            /* Spin animation: duration and a modern easing function */
            transition: transform 4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .cube-face {
            position: absolute;
            width: 220px;
            height: 220px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 1.5rem;
            box-sizing: border-box;
            background: rgba(28, 28, 30, 0.8);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            border: 2px solid #8B5CF6;
            border-radius: 1.25rem;
            font-size: 1.875rem; /* 30px */
            font-weight: 600; /* semibold */
            color: #d1d5db; /* text-gray-300 */
        }
        
        /* Position each face in 3D space to form a cube */
        .front  { transform: rotateY(0deg) translateZ(110px); }
        .back   { transform: rotateY(180deg) translateZ(110px); }
        .right  { transform: rotateY(90deg) translateZ(110px); }
        .left   { transform: rotateY(-90deg) translateZ(110px); }
        .top    { transform: rotateX(90deg) translateZ(110px); }
        .bottom { transform: rotateX(-90deg) translateZ(110px); }
        
        /* Custom border/background for the main card */
        .card-style {
            background-color: rgba(28, 28, 30, 0.6);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }

    </style>
</head>
<body class="text-white flex items-center justify-center min-h-screen font-sans p-4">

    <div class="container mx-auto max-w-md w-full">

        <div id="main-menu-view">
            <header class="text-center mb-10">
                <h1 class="text-4xl sm:text-5xl font-extrabold text-gray-100 tracking-tight">ü§∑‚Äç‚ôÇÔ∏è</h1>
                <p class="mt-3 text-lg text-gray-400">N√°hodn√Ω rozhodovaƒç, ƒçi ƒço.</p>
            </header>
            <div class="space-y-4">
                <button data-view="genre-view" class="menu-button w-full p-5 text-left card-style rounded-xl hover:border-violet-400 transition-all duration-300 flex items-center space-x-4">
                    <span class="text-4xl p-3 bg-white/10 rounded-lg" role="img" aria-label="Film">üé¨</span>
                    <div>
                        <h2 class="text-lg font-semibold text-gray-100">Filmov√Ω ≈æ√°ner</h2>
                        <p class="text-sm text-gray-400">N√°hodn√Ω v√Ωber ≈æ√°nru</p>
                    </div>
                </button>
                 <button data-view="yes-no-view" class="menu-button w-full p-5 text-left card-style rounded-xl hover:border-violet-400 transition-all duration-300 flex items-center space-x-4">
                    <span class="text-4xl p-3 bg-white/10 rounded-lg" role="img" aria-label="√Åno/Nie">üëçüëé</span>
                    <div>
                        <h2 class="text-lg font-semibold text-gray-100">√Åno / Nie</h2>
                        <p class="text-sm text-gray-400">R√Ωchle rozhodnutie</p>
                    </div>
                </button>
                <button data-view="streaming-view" class="menu-button w-full p-5 text-left card-style rounded-xl hover:border-violet-400 transition-all duration-300 flex items-center space-x-4">
                    <span class="text-4xl p-3 bg-white/10 rounded-lg" role="img" aria-label="TV">üì∫</span>
                    <div>
                        <h2 class="text-lg font-semibold text-gray-100">Stream slu≈æba</h2>
                        <p class="text-sm text-gray-400">Kde dnes pozera≈•?</p>
                    </div>
                </button>
            </div>
        </div>

        <div id="selection-view" class="hidden relative card-style p-6 sm:p-8 rounded-2xl">
            <div class="absolute top-4 left-4 z-10">
                 <button id="back-button" class="flex items-center gap-1.5 px-3 py-1.5 bg-white/10 text-gray-300 font-semibold rounded-lg hover:bg-white/20 transition-colors focus:outline-none focus:ring-2 focus:ring-violet-500">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                      <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" />
                    </svg>
                    Nasp√§≈•
                </button>
            </div>

            <div class="text-center">
                <h2 id="selection-title" class="text-2xl md:text-3xl font-bold text-gray-100 mb-2"></h2>

                <div id="dice-scene-container">
                    <div id="dice-scene">
                        <div id="cube">
                            <div class="cube-face front">?</div>
                            <div class="cube-face back"></div>
                            <div class="cube-face right"></div>
                            <div class="cube-face left"></div>
                            <div class="cube-face top"></div>
                            <div class="cube-face bottom"></div>
                        </div>
                    </div>
                </div>

                <div class="h-16 flex items-center justify-center">
                    <p id="result-text" class="text-3xl font-bold text-violet-400 transition-all"></p>
                </div>

                <div class="mt-2 h-10 flex items-center justify-center">
                    <p id="prompt-text" class="text-gray-400 transition-opacity duration-300"></p>
                </div>
            </div>
        </div>
    </div>

<script>
    // --- SOURCE DATA ---
    const dataSources = {
        'genre-view': {
            title: 'N√°hodn√Ω v√Ωber filmov√©ho ≈æ√°nru',
            resultPrefix: 'Dnes si pozrie≈°:',
            values: ["Akƒçn√Ω üí•", "Kom√©dia üòÇ", "Dr√°ma üé≠", "Horor üëª", "Sci-Fi üëΩ", "Triler üî™", "Romantick√Ω ‚ù§Ô∏è", "Dokument√°rny üåç", "Animovan√Ω üß∏", "Fantasy üßô"]
        },
        'yes-no-view': {
            title: 'Rozhodovaƒç √Åno / Nie',
            resultPrefix: 'Odpoveƒè je:',
            values: ['√Åno üëç', 'Nie üëé', 'Urƒçite! ‚úÖ', 'Ani n√°hodou ‚ùå', 'Mo≈æno ü§î', 'Sk√∫s znova ü§∑‚Äç‚ôÄÔ∏è']
        },
        'streaming-view': {
            title: 'Ktor√∫ streamingov√∫ slu≈æbu?',
            resultPrefix: 'Zapni si:',
            values: ['Netflix', 'HBO Max', 'Disney+', 'SkyShowtime', ]
        }
    };

    // --- PAGE ELEMENTS ---
    const mainMenuView = document.getElementById('main-menu-view');
    const selectionView = document.getElementById('selection-view');
    const menuButtons = document.querySelectorAll('.menu-button');
    const backButton = document.getElementById('back-button');
    const selectionTitle = document.getElementById('selection-title');
    const diceContainer = document.getElementById('dice-scene-container');
    const cube = document.getElementById('cube');
    const cubeFaces = document.querySelectorAll('.cube-face');
    const resultText = document.getElementById('result-text');
    const promptText = document.getElementById('prompt-text');

    const SPIN_DURATION_MS = 4000; // Must match the CSS transition duration in ms
    let currentSelectionRunner = null;
    let isSpinning = false; // State to prevent multiple rolls

    // --- VIEW SWITCHING ---
    function showView(viewId) {
        document.body.style.transition = 'opacity 0.3s ease-in-out';
        document.body.style.opacity = '0';

        setTimeout(() => {
            if (viewId === 'main-menu-view') {
                mainMenuView.classList.remove('hidden');
                selectionView.classList.add('hidden');
                if (currentSelectionRunner) {
                    currentSelectionRunner.cleanup();
                    currentSelectionRunner = null;
                }
            } else {
                mainMenuView.classList.add('hidden');
                selectionView.classList.remove('hidden');
                setupSelection(viewId);
            }
            document.body.style.opacity = '1';
        }, 300);
    }

    // --- SETUP SELECTION ---
    function setupSelection(viewId) {
        if (currentSelectionRunner) {
            currentSelectionRunner.cleanup();
        }
        const source = dataSources[viewId];
        currentSelectionRunner = createDiceRunner(source.values, source.resultPrefix);
        selectionTitle.textContent = source.title;
        
        // The main trigger is now the dice container
        diceContainer.onclick = () => {
            if (!isSpinning) {
                currentSelectionRunner.run();
            }
        };

        currentSelectionRunner.reset();
    }

    // --- 3D DICE LOGIC ---
    function createDiceRunner(values, prefix) {
        // Defines the target rotation to show each face
        const faceRotations = [
            { name: 'front',  x: 0, y: 0 },
            { name: 'right',  x: 0, y: -90 },
            { name: 'back',   x: 0, y: -180 },
            { name: 'left',   x: 0, y: 90 },
            { name: 'top',    x: -90, y: 0 },
            { name: 'bottom', x: 90, y: 0 }
        ];

        const reset = () => {
            cube.style.transition = 'none';
            cube.style.transform = `rotateX(0deg) rotateY(0deg)`;
            cubeFaces.forEach(face => face.textContent = '');
            cube.querySelector('.front').textContent = '?';
            resultText.textContent = '';
            promptText.textContent = 'Kliknite na kocku pre hodenie';
            promptText.style.opacity = '1';
            isSpinning = false;
        };

        const cleanup = () => {
            reset();
            diceContainer.onclick = null; // Remove listener on cleanup
        };

        const run = () => {
            if (isSpinning) return; // Guard against re-triggering
            isSpinning = true;
            
            resultText.textContent = '';
            promptText.style.opacity = '0'; // Hide prompt during spin

            // 1. Shuffle the source values to get a random order
            const shuffledValues = [...values].sort(() => 0.5 - Math.random());

            // 2. Populate all 6 faces with different values
            faceRotations.forEach((faceInfo, index) => {
                const faceElement = cube.querySelector(`.${faceInfo.name}`);
                faceElement.textContent = shuffledValues[index % shuffledValues.length];
            });
            
            // 3. Pick a random face to be the "winner"
            const randomFaceIndex = Math.floor(Math.random() * faceRotations.length);
            const targetFace = faceRotations[randomFaceIndex];
            const selectedValue = cube.querySelector(`.${targetFace.name}`).textContent;

            // 4. Calculate the final rotation
            const fullSpinsX = 5;
            const fullSpinsY = 5;
            const finalX = (fullSpinsX * 360) + targetFace.x;
            const finalY = (fullSpinsY * 360) + targetFace.y;

            // 5. Apply the transition and transform to start the spin
            cube.style.transition = `transform ${SPIN_DURATION_MS / 1000}s cubic-bezier(0.34, 1.56, 0.64, 1)`;
            cube.style.transform = `rotateX(${finalX}deg) rotateY(${finalY}deg)`;
            
            // 6. After the animation, show the text result and re-enable rolling
            setTimeout(() => {
                resultText.textContent = `${prefix} ${selectedValue}`;
                promptText.textContent = 'Kliknite pre ƒèal≈°√≠ hod';
                promptText.style.opacity = '1';
                isSpinning = false; // Allow rolling again
            }, SPIN_DURATION_MS);
        };

        return { run, cleanup, reset };
    }

    // --- INITIALIZE EVENT LISTENERS ---
    menuButtons.forEach(button => {
        button.addEventListener('click', (e) => {
            e.preventDefault();
            showView(button.dataset.view);
        });
    });

    backButton.addEventListener('click', (e) => {
        e.preventDefault();
        showView('main-menu-view');
    });

</script>

</body>
</html>
